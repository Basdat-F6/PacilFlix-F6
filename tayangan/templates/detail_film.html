{% extends 'base.html' %}

{% block meta %}
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
          theme: {
              extend: {
              colors: {
                netflix: '#E50914',
                darker:'#B81D24'
              }
            }
        }
    }
    </script>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}
    <div class="container my-12">
        <h1 class="mx-auto max-w-2xl text-4xl font-bold tracking-tight text-gray-900 sm:text-4xl text-netflix">Movie Details</h1>
        <h2 class="mx-auto max-w-2xl text-7xl font-medium tracking-tight text-gray-900 sm:text-7xl">{{ detail.judul }}</h2>
        
        {% if username_cookie %}
        <form method="POST" action="{% url 'tayangan:watch-film' detail.id %}">
            {% csrf_token %}
            <div class="flex flex-col items-center justify-center gap-5 mt-6 md:flex-row">
                <input type="range" min="0" max="100" value="0" class="slider" id="watchProgress" name="watchProgress" oninput="this.nextElementSibling.value = this.value">
                <input type="number" min="0" max="100" value="0" class="integer-input" id="watchProgressInt" name="watchProgressInt" oninput="this.previousElementSibling.value = this.value">
                <button type="submit" class="no-underline inline-block w-auto text-center min-w-[200px] px-6 py-4 text-white transition-all rounded-md shadow-xl sm:w-auto bg-gradient-to-r from-netflix to-blue-500 hover:bg-gradient-to-b dark:shadow-blue-900 shadow-blue-200 hover:shadow-2xl hover:shadow-blue-400 hover:-tranneutral-y-px">
                    Watch Now
                </button>
            </div>
        </form>

        {% if progress %}
        <div class="mt-6">
            <h3 class="text-xl font-bold">Your Watch Progress</h3>
            <p>Started at: {{ progress.start_date_time }}</p>
            <p>Ended at: {{ progress.end_date_time }}</p>
        </div>
        {% endif %}

        <table class="table table-hover mt-6">
            <tbody>
                <tr>
                    <td><strong>Total View</strong></td>
                    <td>{{ detail.total_view }}</td>
                </tr>
                <tr>
                    <td><strong>Rating Rata-Rata</strong></td>
                    <td>{{ detail.rating_rata_rata }}</td>
                </tr>
                <tr>
                    <td><strong>Sinopsis</strong></td>
                    <td>{{ detail.sinopsis }}</td>
                </tr>
                <tr>
                    <td><strong>Durasi Film</strong></td>
                    <td>{{ detail.durasi_film }} menit</td>
                </tr>
                <tr>
                    <td><strong>Tanggal Rilis</strong></td>
                    <td>{{ detail.release_date_trailer }}</td>
                </tr>
                <tr>
                    <td><strong>Genre</strong></td>
                    <td>{{ detail.genre }}</td>
                </tr>
                <tr>
                    <td><strong>Asal Negara</strong></td>
                    <td>{{ detail.asal_negara }}</td>
                </tr>
                <tr>
                    <td><strong>Pemain</strong></td>
                    <td>{{ detail.pemain }}</td>
                </tr>
                <tr>
                    <td><strong>Penulis</strong></td>
                    <td>{{ detail.penulis }}</td>
                </tr>
                <tr>
                    <td><strong>Sutradara</strong></td>
                    <td>{{ detail.sutradara }}</td>
                </tr>
            </tbody>
        </table>

        <a class="no-underline inline-block w-auto text-center min-w-[200px] px-6 py-4 text-white transition-all rounded-md shadow-xl sm:w-auto bg-gradient-to-r from-netflix to-darker hover:bg-gradient-to-b dark:shadow-blue-900 shadow-netflix-darker hover:shadow-2xl hover:shadow-netflix hover:-tranneutral-y-px "
         href="{% url 'ulasan:show-review' detail.id %}">
            Lihat Ulasan
        </a>
        {% else %}
        <p class="text-center text-lg text-gray-700">Please log in to view the movie details.</p>
        {% endif %}
    </div>
{% endblock %}
